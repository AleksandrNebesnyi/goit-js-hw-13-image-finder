{"version":3,"sources":["js/apiService.js","js/components/load-more-btn.js","index.js"],"names":["API_KEY","BASE_URL","PixabayApiService","searchQuery","page","perPage","url","fetch","then","response","json","photo","incrementPage","newQuery","LoadMoreBtn","selector","hidden","refs","getRefs","hide","button","document","querySelector","label","spinner","disabled","textContent","classList","add","remove","pixabayApiService","console","log","searchForm","articlesContainer","onSearch","e","preventDefault","query","currentTarget","elements","value","alert","resetPage","clearArticlesContainer","fetchPhotos","fetchPhoto","data","addEventListener"],"mappings":"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","file":"src.4a14a1fb.js","sourceRoot":"../src","sourcesContent":["// const API_KEY = '4330ebfabc654a6992c2aa792f3173a3';\n// const BASE_URL = 'https://newsapi.org/v2';\n// const options = {\n//   headers: {\n//     Authorization: API_KEY,\n//   },\n// };\n\n// export default class NewsApiService {\n//   constructor() {\n//     this.searchQuery = '';\n//     this.page = 1;\n//   }\n\n//   fetchArticles() {\n//     const url = `${BASE_URL}/everything?q=${this.searchQuery}&language=en&pageSize=5&page=${this.page}`;\n\n//     return fetch(url, options)\n//       .then(response => response.json())\n//       .then(({ articles }) => {\n//         this.incrementPage();\n//         return articles;\n//       });\n//   }\n\n//   incrementPage() {\n//     this.page += 1;\n//   }\n\n//   resetPage() {\n//     this.page = 1;\n//   }\n\n//   get query() {\n//     return this.searchQuery;\n//   }\n\n//   set query(newQuery) {\n//     this.searchQuery = newQuery;\n//   }\n// }\n// https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=что_искать&page=номер_страницы&per_page=12&key=твой_ключ\n\nconst API_KEY = '18530950-a935dc045ea4774fb23c446e2';\nconst BASE_URL =\n  'https://pixabay.com/api/?image_type=photo&orientation=horizontal&';\n\nexport default class PixabayApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n    this.perPage = 12;\n  }\n\n  fetchPhoto() {\n    const url = `${BASE_URL}q=${this.searchQuery}&page=${this.page}&per_page=${this.perPage}&key=${API_KEY}`;\n\n    return fetch(url)\n      .then(response => response.json())\n      .then(({ photo }) => {\n        this.incrementPage();\n        return photo;\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","export default class LoadMoreBtn {\n  constructor({ selector, hidden = false }) {\n    this.refs = this.getRefs(selector);\n\n    hidden && this.hide();\n  }\n\n  getRefs(selector) {\n    const refs = {};\n    refs.button = document.querySelector(selector);\n    refs.label = refs.button.querySelector('.label');\n    refs.spinner = refs.button.querySelector('.spinner');\n\n    return refs;\n  }\n\n  enable() {\n    this.refs.button.disabled = false;\n    this.refs.label.textContent = 'Показать ещё';\n    this.refs.spinner.classList.add('is-hidden');\n  }\n\n  disable() {\n    this.refs.button.disabled = true;\n    this.refs.label.textContent = 'Загружаем...';\n    this.refs.spinner.classList.remove('is-hidden');\n  }\n\n  show() {\n    this.refs.button.classList.remove('is-hidden');\n  }\n\n  hide() {\n    this.refs.button.classList.add('is-hidden');\n  }\n}\n","/*\n * - Пагинация\n *   - страница и кол-во на странице\n * - Загружаем статьи при сабмите формы\n * - Загружаем статьи при нажатии на кнопку «Загрузить еще»\n * - Обновляем страницу в параметрах запроса\n * - Рисуем статьи\n * - Сброс значения при поиске по новому критерию\n *\n * https://newsapi.org/\n * 4330ebfabc654a6992c2aa792f3173a3\n * http://newsapi.org/v2/everything?q=cat&language=en&pageSize=5&page=1\n */\n\n// import photosTpl from './templates/photo.hbs';\nimport './css/common.css';\nimport PixabayApiService from './js/apiService';\nimport LoadMoreBtn from './js/components/load-more-btn';\n\nconst pixabayApiService = new PixabayApiService();\nconsole.log(pixabayApiService);\n\nconst refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  articlesContainer: document.querySelector('.js-articles-container'),\n};\n// const loadMoreBtn = new LoadMoreBtn({\n//   selector: '[data-action=\"load-more\"]',\n//   hidden: true,\n// });\n\nrefs.searchForm.addEventListener('submit', onSearch);\n// loadMoreBtn.refs.button.addEventListener('click', fetchPhotos);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  pixabayApiService.query = e.currentTarget.elements.query.value;\n  console.log(pixabayApiService.query);\n\n  if (pixabayApiService.query === '') {\n    return alert('Введи что-то нормальное');\n  }\n\n  // loadMoreBtn.show();\n  pixabayApiService.resetPage();\n  clearArticlesContainer();\n  fetchPhotos();\n}\n\nfunction fetchPhotos() {\n  // loadMoreBtn.disable();\n  pixabayApiService.fetchPhoto().then(data => {\n    console.log(data);\n    // appendArticlesMarkup(photos);\n    // loadMoreBtn.enable();\n  });\n}\n\n// function appendArticlesMarkup(photos) {\n//   refs.articlesContainer.insertAdjacentHTML('beforeend', photosTpl(photos));\n// }\n\n// function clearArticlesContainer() {\n//   refs.articlesContainer.innerHTML = '';\n// }\n"]}